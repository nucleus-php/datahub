#!/usr/bin/env php
<?php

if ('vendor' === basename($vendorDir = realpath(dirname(dirname(getcwd() . '/' . $_SERVER['SCRIPT_FILENAME']))))) {
    // We're symlinked into vendor/bin/ dir: we're included into a project (Composer requirement)
    require_once $vendorDir . '/autoload.php';
} elseif (is_dir($vendorDir = __DIR__ . '/../vendor')) {
    // We're in root bin/ dir: this is a local project (clone/copy)
    require_once $vendorDir . '/autoload.php';
} else {
    throw new \Error('Could not load Composer\'s vendor/autoload.php');
}

$application = new \NucleusPhp\DataHub\Console\Application();

$application->add(new \NucleusPhp\DataHub\Console\Command\EventDispatchCommand());
$application->add(new \NucleusPhp\DataHub\Console\Command\JobRunCommand());

$application->run();
